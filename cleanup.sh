#!/usr/bin/env bash
# shellcheck disable=SC2002
#  PURPOSE: Cleanup after a test.
# -----------------------------------------------------------------------------
#  PREREQS: a)
#           b)
#           c)
# -----------------------------------------------------------------------------
#  EXECUTE:
# -----------------------------------------------------------------------------
#     TODO: 1)
#           2)
#           3)
# -----------------------------------------------------------------------------
#   AUTHOR: Todd E Thomas
# -----------------------------------------------------------------------------
#  CREATED: 2018/09/00
# -----------------------------------------------------------------------------
set -x


###----------------------------------------------------------------------------
### VARIABLES
###----------------------------------------------------------------------------
# ENV Stuff
reqdUser="$1"
# Data Files


###----------------------------------------------------------------------------
### FUNCTIONS
###----------------------------------------------------------------------------


###----------------------------------------------------------------------------
### MAIN PROGRAM
###----------------------------------------------------------------------------
### Check arguments
###---
if [[ -z "$1" ]]; then
    echo "You need to pass a user as \$1; I'm out."
    exit 1
fi

###---
### Delete the objects
###---
kubectl delete rolebinding read-pods
# rolebinding.rbac.authorization.k8s.io "read-pods" deleted
kubectl delete csr "$reqdUser.csr"
#certificatesigningrequest.certificates.k8s.io "mvh.csr" deleted
rm -f "*$reqdUser*"


###---
### fin~
###---
exit 0
